<!-- MHonArc v2.2.0 -->
<!--X-Subject: Re: nkf -->
<!--X-From: SL Baur <steve@example.com> -->
<!--X-Date: 28 Feb 2001 19:36:36 +0900 -->
<!--X-Message-Id: m2elwj856z.fsf@example.com -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 007801c0a135$3f708050$0f01a8c0@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Schweizer - webmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00367.html">Date Prev</A>][<A HREF="msg00369.html">Date Next</A>][<A HREF="msg00359.html">Thread Prev</A>][<A HREF="msg00364.html">Thread Next</A>][<A HREF="maillist.html#00368">Date Index</A>][<A HREF="threads.html#00368">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: nkf</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:tlug@example.com">tlug@example.com</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: nkf</strong></LI>
<LI><strong>From</strong>: <strong>SL Baur &lt;<A HREF="mailto:steve@example.com">steve@example.com</A>&gt;</strong></LI>
<LI>Date: 28 Feb 2001 19:36:36 +0900</LI>
<LI>Content-Type: text/plain; charset=ISO-2022-JP</LI>
<LI>In-Reply-To: "SN_Diamond"'s message of "Wed, 28 Feb 2001 12:19:02 +0900"</LI>
<LI>Mail-Copies-To: never</LI>
<LI>References: &lt;<A HREF="msg00358.html">007801c0a135$3f708050$0f01a8c0@example.com</A>&gt;</LI>
<LI>Reply-To: <A HREF="mailto:tlug@example.com">tlug@example.com</A></LI>
<LI>Resent-From: tlug@example.com</LI>
<LI>Resent-Message-ID: &lt;N9ydnC.A._HG._SNn6@example.com&gt;</LI>
<LI>Resent-Sender: tlug-request@example.com</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
SN Diamond &lt;Norman.Diamond@example.com&gt; writes in tlug@example.com:

&gt; Does someone have a readable manual page for the command "nkf"?

In case you want to see what the Japanese is supposed to look like ...


NKF(1)							   NKF(1)


NAME
       nkf - ネットワーク用漢字コード変換フィルタ v1.9

SYNOPSIS
       nkf [options] [file]

DESCRIPTION
       nkfは ネットワークでメールやニュースの読み書きをするために
       作られた、漢字コードの変換フィルタである。

       このnkfの特徴としては、入力漢字コード系の統計的な自動認 識
       機能がある。このため、利用者は、入力漢字コード系が何である
       かを知らなくても、出力漢字コード系のみ指定すれば良いことに
       なる。ただ、この判定機構は、理論纔瘢韭絎竢蹣には完全ではないが、通常
       のニュースやメールのメッセージについては確実に動作する安全
       なものにはなっている。

       現在、nkfが認識できる入力の漢字コード系は、いわゆる「JISコ
       ード」(ISO- 2022-JPに基づく も の)、MS漢 字 コ ー ド(シ フ
       トJIS)、 日本語EUC(AT&amp;Tコード)のいずれかである。出力する漢
       字コード系も、この3種類である。

       入力は、ファイルを指定しなければ、標準入力となる。出力は標
       準出力である。

       指定できるオプションは、以下の通り。-mu のように続けること
       ができる。

       -b     バッファリング出力を行う。(デフォルト)

       -u     出力時に、バッファリングしない。	rsh  localhost	|
	      nkf -u というように使う。

       -t     何もしない。

       -j     JISコードを出力する。(デフォルト)

       -e     EUCコードを出力する。

       -s     シフトJISコードを出力する。

       -i?    JIS漢字を指示するシーケンスとして ESC-'$'-?を使用す
	      る。 (デフォルトは、ESC-'$'-'B')

       -o?    1バイト英数文字セットを指示するシ ー ケ ン ス と し
	      て、ESC-'('-?を  使  用  す  る。	  (デ  フォ ル ト
	      は、ESC-'('-'B')

       -r     ROT13/47の変換をする。

       -v     バージョンを表示する。

       -T     テキストモードで出力する。(MS-DOS上でのみ効力 を 持
	      つ)



								1





NKF(1)							   NKF(1)


       -m[QB0SL]
	      MIME    を	  解   読	  す   る。(デ   フォ	 ル  ト)
	      ISO-2022-JP(base64)とISO-8859-1(Q encode) のみを 解
	      読 する。ISO-8859-1 (Latin-1) を解読する時は、 -lフ
	      ラグも必要である。-m0 ではMIMEを解読 し な い。-mQ,
	      -mBでは、 Q encode, B encode されているものとして処
	      理する。
		-mB   MIME base64 stream を解読する。ヘッダなどは取り除くこと。
		-mQ   MIME quoted stream を解読する。
		-mS   MIME のチェックを厳しくする (デフォルト)
		-mN   MIME のチェックを緩くする
		-m0   MIME を解読しない。

		 -mS は、舌逅跂闕世瞭睛討函△修慮紊紡海矚黼挟の舌逅跂闕舌逅跂闕をチェックします。
		      かなり遅くなります。S を付けないと、改行で舌逅跂闕られたMIMEなども
		      解読してしまいます。

       -l     0x80-0xfeのコードをISO-8859-1 (Latin-1)として扱う。
	      JISコードアウトプットとの組合せみのみ有効。
	      -s, -e, -xとは両立しない。

       -f?    一行?文字になるように簡単な舌逅跂闕をおこなう。デフォルトは
	      60文字である。

       -Z     X0208中の英数字と若干の記号をASCIIに変換する。-Z1 はX0208間隔をASCII
	      spaceに変換する。-Z2はX0208間隔をASCII space 二つに変換する。趣味によって
	      使い分けてほしい。

       -J -E -S -X -B
	      期待される入力コードの舌逅跂闕質を指定する。

	      -J     ISO-2022-JPを仮定する。

	      -E     日本語EUC(AT&amp;T)を仮定する。

	      -S     MS漢字を仮定する。X0201仮名も仮定される。

	      -X     MS漢字中にX0201仮名があると仮定する。

	      -B     壊れた(Broken)JISコード。ESCがなくなったと仮定する。

		      -B1     ESC-(, ESC-$ のあとのコードを問わない

		      -B2    改行のあとに強制的にASCIIの戻す

	      -x
	      通常おこなわれるX0201仮名-&gt;X0208の仮名変換をしないで、
	       X0201仮名を保存する。入力は、MS-Kanjiの1byte仮名、SO/SI、
	      ESC-(-I, SSOを受け付ける。出力は、日本語EUC中ではSSO、
	      JISでは ESC-'('-I を使う。

       -M     MIME に変換する。JISにコード変換してからbase64されます。

	      -M     ヘッダ纔瘢韭絎竢躰阿吠儡垢垢



								




遼逃羽							貌┗

	癈絛齡鱚瘢ぢに変換する


       -O     ファイルに出力する。Unixでは不要な機能だがWindowsやMSDOSでは
	      必要らしい。直後の引き数でなく、最後のファイル名が出力ファイ
	      ル名となり上書きされてしまうので注意。ファイル名がない場合は、
	      適当に決められる(デフォルト nkf.out)。

       -c     NLあとにCRを付加する。

       -d     NLあとのCRを削除する。

       -L[wmu]ドド
			    -Lu	  unix (LF)
			    -Lw	  windows (CRLF)
			    -Lm	  mac (CR)
			デフォルトは変換なしです。

       --のの
		  別名です。
		   --fj,--unix,--mac,--msdos, --windows
			 これらのシステムに適した変換をします。

		   --jis,--euc,--sjis,--mime,--base64
		      対応する変換をします。

		   --help
		   --version
		   --	     これ以降のオプションを無視する

AUTHOR
       市    舌逅跂闕		 至  ichikawa@example.com	  (was
       ichikawa@example.com)


ACKNOWLEDGE
       morb@example.com,		   kiss@example.com,
       cen122@example.com,   yuki@example.com	  他、fujitsu   &amp;
       flab.fujitsuの 皆 さ ん の 協力に感謝。 shinoda@example.com,
       kato@example.com,	  uematsu@example.com	TNX    kono@example.com
       ryukyu.ac.jp


BUGS
       実は、入力のコード系の判定は、EUCとシフトJISとの自動判定で
       あり、最初に特定できる文字が来た時点で確定してしまう。そし
       て、特定不能の間は保留バッファにためておかれ、確定後に処理
       される。このため、

       1)     7ビットJISは常に認識される。シフトJIS、EUC混合も ほ
	      とんどの場合は問題がない。ただし、

       2)     シ フ トJISのX0201仮名とEUCが識別できない。したがっ
	      て、デフォルトではシフトJISのX0201仮名はないと仮 定



								3





NKF(1)							   NKF(1)


	      している。

       3)     ちょっと、のろい。(初期の版よりは改良されている)

       JIS漢 字の新旧版の区別とか、ASCIIとJISローマ字の区別などに
       ついては保存されない。

       このフィルタの変換は、コード系に対応した一括写像を施すだけ
       な ので、外字や特殊記号や罫線素片など、JIS第一、第二水準表
       において定義されていないコードに各社により割り当てられた文
       字がどうなるかまでは関知しない。そして、第二水準がないとか
       あるとかによる問題は、このフィルタの範囲外と思える。それら
       は、書き手の舌逅跂闕い任覆鵑箸靴討發蕕い燭ぁ

ぢいずれにせよ、通常のニュースの記事については問題はなく変換
       できるはずである。(と思うのだが、今ひとつ自信はない)


kono@example.com (Shinji Kono)。。
       nkf 1.4 の冗長だけど舌逅跂闕は便利だったオプションのいくつかは削
       除されている。 - -n -Bなど。

       X0201仮 名 は デ フォルトでX0208に変換される。ただし、シフ
       トJISのX0201仮名はデフォルトではEUCだと解釈されてしま う。
       これが望ましくない時には -S や - -X などのフラグを使えば良
       い。-Xを指定すると一旦確定したシフトJISから EUCに移行す る
       こ と は な い。ESC-(-Iによる X0201は常に認識される。SI/SO
       SSOは、-lが指定されていなければX0201と解釈する。

       MIME
       decodeは、ISO-2022-JPのbase64と、ISO-8859-1の16進encodeの
       み decodeする。 MIME decodeは、単純な改行や空白は安全に 読
       み飛ばされる。ということは、 MIME decode中の空白は保存され
       ない。lessやrnで行が分割された時は、 Terminalによって異 な
       る  ESC-[-K  な ど が挿入されるので、完全にはdecode できな
       い。ISO-8859-1 出力はJIS コード出力としか両立しない。

       Fold 機能はfmtと異なり行頭の空白を無視する。禁則処理はある
       が指定された長さ+5で強制改行する。

       X0201仮名はrot47されない。


nkf 1.6 kono@example.com (Shinji Kono)。。
       MIME  のチェックをきびしくして(遅くなった分)安全になった。
       したがって複数行にまたがるMIMEはdecodeされない。 MIME の直
       後の空白は読み飛ばす。Q-Encding の_は空白に変換される。
	-B  のlevelを0,1,2 に増やした。MIMEのbase64, Q-Encodingを
       解読する機能を付けた。ヘッダなどは解読しないので、Encodeさ
       れ た部分だけを通す必要がある。 -mB は、nkf1.5と違う動きを
       するので、-B -m とすること。






								4





NKF(1)							   NKF(1)


nkf 1.6.1
       -Z で〜 -&gt; ~の変換 を 止 め た。  -Z1  でX0208間 隔-&gt;ASCII
       spaceの変換をおこなう。 -Z2 でX0208間隔-&gt;ASCII space 2個の
       変換をおこなう。

       kabe@example.com (Taketo Kabe) による日 本 語roff
       のソースができました。


nkf 1.7
       ESC-$-(-B などにも対応するようにしました。

       MIMEの チェッ ク が 厳 しすぎるように思うので、STRICT_MIME
       をdefine した時にのみに厳しいチェックを行う用にしました。

       nkf は、本来、network 上に出して安全なコードをデフォルトで
       出 力 すべきであるので、デフォルトの出力コードをShift JIS,
       EUC などにするのは望ましくないでしょう。

       他の人と少し話して、copy right の非営利の条件を緩 め ま し
       た。

       Perl Extension として使えるようになりました。

       patch 1 for 1.7


       version が間違ってました。


       MIME  decode をデフォルトにしたのに、MIME の条件を緩めたの
       が少し緩め過ぎのようですね。uuencode とかがひっかかって し
       ま う。 STRICT_MIME を define すればいいのですが、ちょっと
       syntax error いれてしまいました。


       define STRICT_MIME をデフォルトに直しました。まぁ、仕方 な
       いかなぁ。


       次の nkf 1.9 では、command option で舌逅跂闕り替えられるようにな
       ります。


       あと NKF.xs で
	   argc = items - 1; を使うようにしました。(by 木 村	  巌
       &lt;iwao@example.com&gt;)


nkf 1.9
       MIME  エンコードの機能を付けました。コード変換されてしまう
       ので、画像とかの単なるエンコーダとしては使えません。かなり
       いい加減です。Subject やメールアドレスを、エンコードする時
       に便利なように変換します。



								5





NKF(1)							   NKF(1)


       で、少し言い訳します。ほとんどのアスキー文字は変換し ま せ
       ん。だから、これで変換したから安全なメールアドレスになるな
       んてことはありません。でも、この方が Subject: 行 や	From:
       行 を 変換するには、便利だろうと僕は想像します。たまに76文
       字/行を越えることがあります。これは規格違反なんですが、 こ
       れは、直すのは結構めんどう。良いアルゴリズムがあるなら採用
       します。( ないんだったら、こんな規格はなくして欲しいよ)

       nkf -M | nkf で、もとに戻らないのは、デコードの際 にMIMEの
       後の改行を無視しないのと、エンコードの時に改行を含めてエン
       コードしないからです。これを、いつ無視するのかを自動的行う
       こ と は、 できない規格になっているようです。nkf -MB | nkf
       -mB では、ちゃんと元に戻ります。

       2.0 の準備。それぞれの変換をモジュールにして、オプションに
       したがって舌逅跂闕するようにしました。これで、比較的楽に拡張で
       きるようになりました。


	     getc &lt;-- iconv --&gt; oconv --&gt;  other  conversion  --&gt;
       putc


       という形で、順に呼び出されます。


       長いオプション名を許すようにしました。
	   --mac
	   --jis などが使えます。


       MIME エンコードの機能を追加しました。(これを追加した時にあ
       まりにスパゲティになったので、モジュールに書き直しました。
       つ いでに、 MIMEのstrict/non strict を選択できるようになり
       ました。


       改行のコードを変換を追加しました。


       EOFの際に不完全なエスケープシーケンスを出すのを止 め ま し
       た。

       1.91 のバグを取りました

       2.0 は unicode 対応になるはずですが...











								6
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00358" HREF="msg00358.html">nkf</A></STRONG>
<UL><LI><EM>From:</EM> "SN_Diamond" &lt;Norman.Diamond@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00367.html">TLUG webmaster postion available.</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00369.html">Re: nkf</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00359.html">Re: nkf</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00364.html">Computer museum? [ot]</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="maillist.html#00368"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00368"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
