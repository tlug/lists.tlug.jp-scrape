#!/usr/bin/env bash
set -e -o pipefail

basedir=$(cd "$(dirname "$0")" && pwd -P)

wget --version >/dev/null || {
    echo 1>&2 "$(basename "$0"):" "'wget' not installed?"
    exit 50    # wget uses error codes up to 10 or so
}

cd "$basedir"

#   The ML.0, ML.1, etc. files are copies of ML/index.html, perhaps
#   generated due to a bug. Always remove these before exit. This
#   preserves the error code of the command just before the exit.
trap 'rm -f "$basedir"/lists.tlug.jp/ML.[0-9]' 0

wget --no-verbose --mirror "$@" https://lists.tlug.jp/
